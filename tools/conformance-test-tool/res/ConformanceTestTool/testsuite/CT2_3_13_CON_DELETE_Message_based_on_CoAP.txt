*** Settings ***
Documentation     CT2_3_13_CON_DELETE_Message_based_on_CoAP
Resource          OIC_ConformanceTest_Setting.txt

*** Test Cases ***
CT2_3_13_CON_DELETE_Message_based_on_CoAP
    [Documentation]    |author | |
    ...    |reviewer| |
    ...    |since |2015-05-11|
    ...    |see |Section 8.4: DELETE|
    ...    |objective |Verify that the client (DUT) properly sends a CON DELETE request message to server (TE)|
    ...    |target | |
    ...    |test_data||
    ...    |pre_condition|1. Server (TE) is discovered from the Client (DUT)|
    ...    |procedure| 1. Send a CON (high QoS) DELETE request message to server |
    ...    |procedure| 2. Reply with DELETE response message to client|
    ...    |procedure| 3. Receives DELETE response message from server and returns an Ack|
    ...    |post_condition| |
    ...    |expected| 1. Verify Client sends the request message including below|
    ...    |expected| In OIC Layer|
    ...    |expected| - fr, to, ri, cn, op|
    ...    |expected| - op = DELETE|
    ...    |expected| - cn Information, including properties, of the resource to be updated |
    ...    |expected| In CoAP Layer|
    ...    |expected| - Type = 0 (CON)|
    ...    |expected| - Code = 4 (DELETE)|
    ...    |expected| 2. Check acknowledgement message on server|
    [Tags]    Mandatory    Client    Delete    Con
    #Pre-Condition
    ####################################################
    Start Server
    Print Message    \n-----------------Send Multicast Discovery Request from DUT App-----------------
    Get Discovery Requests
    #Test-Body
    #####################################################
    Print Message    "Send CON DELETE Request..."
    Print Message    \n-----------------Send CON DELETE Request from DUT App-----------------
    ${request}    Get Request
    ${request_code}    Get Request Code    ${request}
    Should Be Equal    ${request_code}    ${DELETE}
    ${request_type}    Get Request Type    ${request}
    Should Be Equal    ${request_type}    ${CON}
#need ack check
    Stop Server
