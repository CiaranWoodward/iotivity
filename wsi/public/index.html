<!DOCTYPE HTML>
<html ng-app="wsi">
    <head>
        <title>WSI Controller</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="assets/css/style.css">
        <link rel="stylesheet" href="assets/css/normalize.min.css">
        <link rel="stylesheet" href="assets/css/main.css">        
    </head>
    <body  ng-controller="wsicontroller">
        <div class="header-container">
            <header class="wrapper clearfix">
                <h1 class="title">WSI SERVICE CONFIGURATION</h1>
                <nav>
                    <ul>
                        <li><a href="index.html">Configuration</a></li>
                        <li><a href="demo.html">Demo</a></li>
                        <li><a href="about.html">About</a></li>
                    </ul>
                </nav>
            </header>
        </div>
        <div id="pagewrap">
            <div id="content">
                <!-- <input type="text" name="servicename" value=""><input type="submit" value="Search"> -->
                <h3>Services List (<span>{{ services.length}}</span>)
                <select style="align: middle;" ng-change="selectService(sampleService)" ng-model="sampleService" ng-options="service.handler for service in services">
                    <option selected="selected" value="">Examples</option>
                </select>
                </h3>
                
                <!--<a href="/wsi/facebook/auth">Signin with Facebook</a>-->
                <table border="1" align="left" style="width: 490px;">
                    <tr ng-repeat="service in services">
                        <td>
                            <ul style="list-style-type:none; align=left;">
                                
                                <li>
                                    <img ng-click="deleteService(service._id)" src="assets/images/delete.png" style="width:15px;height:15px;border:0">
                                    <input name = "serviceradio" type="radio" ng-click="readService(service._id)">
                                    {{ service.handler}}
                                </li>
		            </ul>
                        </td>
                        <td>
                            <div ng-controller="capcontroller">
                                <ul style="list-style-type:none; align=left;" ng-repeat="cap in service.capability track by cap.cid"">
                                    <div ng-if="cap.isauthrequired==='true'">
                                        <a href="{{service.auth[0].endpoint}}">Authenticate via {{service.handler}}</a>
                                    </div>
                                    <li>
                                        <input name="capradio" id="selectcap" value="{{cap.cid}}" type="radio" ng-click="initCapability(cap.cid)">{{cap.cid}}
                                        <img ng-click="runCapability(cap.cid)" src="assets/images/execute.png" style="width:15px;height:15px;border:0">
                                    </li>
                                </ul>
                                
                            </div>
                        </td>
                    </tr>
                </table>
            </div>

            <div id="middle">
                <h3>Manage</h3>
		<form>
                    <button id="create" type="submit" ng-click="createService()">Create</button>
                    <button id='save' type="submit" ng-click="updateService()">Save</button><br>
                    <div style="width: 450px; height: 350px" id="jsoneditor"></div>
                </form>                
            </div>

            <div id="sidebar">
		<form>
                    <h3>Preview</h3>
<!--
                    <button id='save' type="submit" ng-click="updateService()">Save</button><br>
-->
                    <div style="width: 450px; height: 350px" id="jsoneditorpreview"></div>
                </form>                
            </div>
        </div>
        <script src="assets/js/angular.js"></script>
	<script src="app.js"></script>
	<script src="factory/dbfactory.js"></script>
        <script src="factory/restfactory.js"></script>
        <script src="controllers/capcontroller.js"></script>
        <script src="controllers/wsicontroller.js"></script>
        <script src="assets/jsoneditor/jsoneditor.min.js"></script>
        <link rel="stylesheet" type="text/css" href="assets/jsoneditor/jsoneditor.min.css">
    </body>
</html>

