##
# 'unit_test' script for building unit tests and libs
#
##

import os

Import('env')

target_os = env.get('TARGET_OS')
src_dir = env.get('SRC_DIR')
build_dir = env.get('BUILD_DIR')


if target_os == 'linux':
	# Verify that 'google unit test' library is installed.  If not,
	# get it and install it
	SConscript(src_dir + '/extlibs/gtest/SConscript')

	# Verify that 'hippomocks' mocking code is installed.  If not,
	# get it and install it
	SConscript(src_dir + '/extlibs/hippomocks.scons')

	# Build C unit tests
	SConscript('csdk/stack/test/SConscript')

	# Build Security Resource Manager unit tests
	SConscript('csdk/security/unittest/SConscript')

	# Build C++ unit tests
	SConscript('unittests/SConscript')

	# Build Provisioning API unit test
	if env.get('SECURED') == '1':
		SConscript('csdk/security/provisioning/unittest/SConscript')

